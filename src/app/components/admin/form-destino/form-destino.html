<div class="admin-container">
  <div class="admin-header">
    <h1>Panel de Administración - Destinos</h1>
    <button class="btn-volver" (click)="volverInicio()">← Volver al Inicio</button>
  </div>

  <form [formGroup]="destinoForm" (ngSubmit)="onSubmit()" class="destino-form">
    <!-- Información Básica -->
    <section class="form-section">
      <h2>Información Básica</h2>

      <div class="form-group">
        <label for="nombre">Nombre del Destino *</label>
        <input
          id="nombre"
          type="text"
          formControlName="nombre"
          [class.input-error]="nombre?.invalid && nombre?.touched"
          placeholder="Ej: Cataratas del Iguazú"
        />
        <div class="error-message" *ngIf="nombre?.invalid && nombre?.touched">
          <span *ngIf="nombre?.errors?.['required']">El nombre es obligatorio</span>
          <span *ngIf="nombre?.errors?.['minlength']">Mínimo 3 caracteres</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="ciudad">Ciudad *</label>
          <input
            id="ciudad"
            type="text"
            formControlName="ciudad"
            [class.input-error]="ciudad?.invalid && ciudad?.touched"
            placeholder="Ej: Puerto Iguazú"
          />
          <div class="error-message" *ngIf="ciudad?.invalid && ciudad?.touched">
            <span *ngIf="ciudad?.errors?.['required']">La ciudad es obligatoria</span>
            <span *ngIf="ciudad?.errors?.['minlength']">Mínimo 2 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="pais">País *</label>
          <input
            id="pais"
            type="text"
            formControlName="pais"
            [class.input-error]="pais?.invalid && pais?.touched"
            placeholder="Ej: Argentina"
          />
          <div class="error-message" *ngIf="pais?.invalid && pais?.touched">
            <span *ngIf="pais?.errors?.['required']">El país es obligatorio</span>
            <span *ngIf="pais?.errors?.['minlength']">Mínimo 2 caracteres</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="descripcion">Descripción *</label>
        <textarea
          id="descripcion"
          formControlName="descripcion"
          [class.input-error]="descripcion?.invalid && descripcion?.touched"
          rows="5"
          placeholder="Describe el destino, sus atractivos y características principales..."
        ></textarea>
        <div class="error-message" *ngIf="descripcion?.invalid && descripcion?.touched">
          <span *ngIf="descripcion?.errors?.['required']">La descripción es obligatoria</span>
          <span *ngIf="descripcion?.errors?.['minlength']">Mínimo 10 caracteres</span>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="precio">Precio (USD) *</label>
          <input
            id="precio"
            type="number"
            formControlName="precio"
            [class.input-error]="precio?.invalid && precio?.touched"
            min="0"
            step="0.01"
          />
          <div class="error-message" *ngIf="precio?.invalid && precio?.touched">
            <span *ngIf="precio?.errors?.['required']">El precio es obligatorio</span>
            <span *ngIf="precio?.errors?.['min']">Debe ser mayor a 0</span>
          </div>
        </div>

        <div class="form-group">
          <label for="capacidadMaxima">Capacidad Máxima *</label>
          <input id="capacidadMaxima" type="number" formControlName="capacidadMaxima" min="1" />
        </div>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" formControlName="disponibilidad" />
          <span>Destino disponible</span>
        </label>
      </div>
    </section>

    <!-- Imágenes -->
    <section class="form-section">
      <h2>Imágenes</h2>

      <div class="form-group">
        <label for="imagenPrincipal">Imagen Principal (URL) *</label>
        <input
          id="imagenPrincipal"
          type="url"
          formControlName="imagenPrincipal"
          [class.input-error]="imagenPrincipal?.invalid && imagenPrincipal?.touched"
          placeholder="https://ejemplo.com/imagen.jpg"
        />
        <div class="error-message" *ngIf="imagenPrincipal?.invalid && imagenPrincipal?.touched">
          <span>La imagen principal es obligatoria</span>
        </div>
      </div>

      <div class="form-group">
        <label>Galería de Imágenes (URLs)</label>
        <div class="input-with-button">
          <input
            type="url"
            [(ngModel)]="nuevaImagen"
            [ngModelOptions]="{ standalone: true }"
            placeholder="https://ejemplo.com/imagen.jpg"
            (keyup.enter)="agregarImagen()"
          />
          <button type="button" class="btn-add" (click)="agregarImagen()">Agregar</button>
        </div>
        <div class="items-list">
          <div class="item-tag" *ngFor="let img of imagenes; let i = index">
            <span>{{ img }}</span>
            <button type="button" class="btn-remove" (click)="eliminarImagen(i)">×</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Actividades -->
    <section class="form-section">
      <h2>Actividades</h2>

      <div class="form-group">
        <label>Lista de Actividades</label>
        <div class="input-with-button">
          <input
            type="text"
            [(ngModel)]="nuevaActividad"
            [ngModelOptions]="{ standalone: true }"
            placeholder="Ej: Trekking, Navegación, Fotografía"
            (keyup.enter)="agregarActividad()"
          />
          <button type="button" class="btn-add" (click)="agregarActividad()">Agregar</button>
        </div>
        <div class="items-list">
          <div class="item-tag" *ngFor="let act of actividades; let i = index">
            <span>{{ act }}</span>
            <button type="button" class="btn-remove" (click)="eliminarActividad(i)">×</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Ubicación -->
    <section class="form-section">
      <h2>Ubicación</h2>

      <div formGroupName="ubicacion">
        <div class="form-row">
          <div class="form-group">
            <label for="latitud">Latitud</label>
            <input id="latitud" type="number" formControlName="latitud" step="0.0001" />
          </div>

          <div class="form-group">
            <label for="longitud">Longitud</label>
            <input id="longitud" type="number" formControlName="longitud" step="0.0001" />
          </div>
        </div>

        <div class="form-group">
          <label for="direccion">Dirección</label>
          <input
            id="direccion"
            type="text"
            formControlName="direccion"
            placeholder="Dirección completa del destino"
          />
        </div>
      </div>
    </section>

    <!-- Botones de Acción -->
    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="limpiarFormulario()">Limpiar</button>
      <button type="submit" class="btn-primary" [disabled]="destinoForm.invalid">
        {{ modoEdicion ? 'Actualizar' : 'Crear' }} Destino
      </button>
    </div>
  </form>
</div>
