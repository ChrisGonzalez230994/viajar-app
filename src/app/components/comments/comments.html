<div class="comments-section">
  <div class="comments-header">
    <h2>Rese√±as de viajeros</h2>
    <div class="rating-summary" *ngIf="averageRating > 0">
      <span class="rating-number">{{ averageRating }}</span>
      <div class="stars">
        <span *ngFor="let star of getStars(averageRating)" [class]="star"></span>
      </div>
      <span class="total-reviews">({{ totalReviews }} rese√±as)</span>
    </div>
  </div>

  <!-- Loading state -->
  <div *ngIf="isLoading" class="loading">
    <p>Cargando rese√±as...</p>
  </div>

  <!-- Empty state -->
  <div *ngIf="!isLoading && comments.length === 0" class="empty-state">
    <p>No hay comentarios para este destino.</p>
  </div>

  <!-- Comments list -->
  <div class="comments-list" *ngIf="!isLoading && comments.length > 0">
    <div class="comment-card" *ngFor="let comment of comments">
      <div class="comment-header">
        <div class="user-info">
          <div class="avatar">{{ getInitials(comment.usuario.nombre || 'Usuario') }}</div>
          <div class="user-details">
            <h4>{{ comment.usuario.nombre || 'Usuario An√≥nimo' }}</h4>
            <span class="date">{{ formatDate(comment.createdAt) }}</span>
          </div>
        </div>
        <div class="rating">
          <span *ngFor="let star of getStars(comment.calificacion)" [class]="star"></span>
        </div>
      </div>

      <p class="comment-text">{{ comment.comentario }}</p>

      <div class="comment-images" *ngIf="comment.imagenes && comment.imagenes.length > 0">
        <img
          *ngFor="let img of comment.imagenes"
          [src]="img"
          alt="Imagen de rese√±a"
          class="review-image"
        />
      </div>

      <div class="comment-footer">
        <button class="like-btn" (click)="likeComment(comment)">
          <span>üëç</span>
          <span>{{ comment.likes || 0 }}</span>
        </button>
        <span class="verified" *ngIf="comment.verificada">‚úì Verificada</span>
      </div>
    </div>
  </div>

  <!-- Load more button -->
  <button *ngIf="hasMore && !isLoading" class="load-more-btn" (click)="loadMore()">
    Ver m√°s rese√±as
  </button>
</div>
